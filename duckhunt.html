<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <style>
       html, body {
	padding: 0;
	margin: 0;
	height: 100%;
}
.duck {
	display: block;
	width: 100px;
	height: 50px;
	background: red;

	position: absolute;
	top: 0;
	left: 0;
	/* animation: fly 15oms linear infinite; */
}
    </style>
</head>

<body>
    <p>Your score: <span id="score">0</span></p>
<p>Life: <span id="life">3</span></p>

    <script>
       class Duck {
	constructor(width = 100, height = 50) {
		this.width = width,
		this.height = height,
		this.top = Math.floor(Math.random() * window.innerHeight * 0.6 + window.innerHeight * 0.1),
		this.direction = Math.floor(Math.random() * 1 - 0.5),
		this.left = (this.direction < 0) ? (this.left = window.innerWidth + 16) : (this.left = 0 - (this.width + 16)),
		this.speed = (Math.random() * 1 + 0.5),
		this.FlyAnimation,
		this.died = false,
		this.Fly();
	}
	initDuck() {
		let DuckHeart = document.createElement('input');
		DuckHeart.type = 'checkbox';
		DuckHeart.name = 'duck';

		let Duck = document.createElement('label');
		Duck.classList.add('duck');
		Duck.appendChild(DuckHeart);
		DuckHeart.addEventListener('click', () => {
			Duck.remove();
			this.Died();
		})

		Duck.style.left = this.left + 'px';
		Duck.style.top = this.top + 'px';

		document.body.append(Duck);
		return Duck;
	}
	Fly(Duck = this.initDuck()) {
		let DuckFlyAnimation = setInterval(() => {
			if (this.direction < 0) {
				this.left -= this.speed;
				Duck.style.left = this.left + 'px';
				if (this.left < -116) {
					Duck.remove();
					this.Out()
					newGame.minusLife();
				}
			}
			else {
				this.left += this.speed
				Duck.style.left = this.left + 'px';
				if (this.left > (window.innerWidth + 16)) {
					Duck.remove();
					this.Out()
					newGame.minusLife();
				}
			}
		}, 4)

		this.FlyAnimation = DuckFlyAnimation;
	}

	Died() {
		clearInterval(this.FlyAnimation);
		newGame.plusScore();
	}
	Out() {
		clearInterval(this.FlyAnimation)
	}
}
/////////////////////////////////////////////////////////////////////////////////////////////////

class Game {
	constructor(lifeCount = 2) {
		this.score = 0,
		this.life = lifeCount,
		this.gameTimer,
		this.AllDucks = [],
		this.start()
	}
	start() {
		let timer = setInterval(() => {
			this.AllDucks.push(new Duck());
		}, 1000)
		this.gameTimer = timer;
	}
	gameOver() {
		clearInterval(this.gameTimer);
		this.AllDucks.forEach(Duck => {
			Duck.Out();
		})
		document.body.querySelectorAll('.duck').forEach(duck => {
			duck.remove();
		})
	}
	minusLife() {
		if (this.life <= 0) {
			this.gameOver()
			console.log('Game Over!');
		}
			this.life--;
			console.log('Life: ', this.life+1);
			document.getElementById('life').innerHTML = this.life + 1;
		
	}
	plusScore() {
		this.score++
		console.log('Score: ', this.score)
		document.getElementById('score').innerHTML = this.score;
	}
}

var newGame = new Game();

    </script>

</body>

</html>